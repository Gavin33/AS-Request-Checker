IMPORTANT: If this code is being run from an automator action, it will not work when run outside of automator's run button. When called as part of a quick action or folder action, the output will be a blank string. There's not much I can do about it, it's just a quirk of bash run from Automator. The rest of the bash script executes before the js finishes running, and there isn't native support for async functionss in bash. You probably should remove the parser at that point anyway since at that point you're usually done testing your code.